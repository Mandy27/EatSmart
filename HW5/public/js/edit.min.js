function toggleReminder(){$(".hide").toggleClass("reminderDivShow"),$(".fa-chevron-right").toggleClass("fa-chevron-down")}function getIcon(e){Rollbar.debug(e);var icon_holder=document.getElementById("iconHolder"),filename=e.timeStamp,icon=document.createElement("img");icon.src=e.fpfile.url,icon.alt=filename,icon.className="icon",icon.id=filename,icon.dataSelected=!1,icon.addEventListener("click",function(){selectImage(filename)}),icon_holder.appendChild(icon),selectImage(filename)}function selectImage(name){$("#iconHolder img").attr("style","border:none"),$("#"+name).attr("style","border:5px solid #42A5F5"),selected_icon.id=name,selected_icon.src=$("#"+name).attr("src")}function authDataCallback(authData){var dailycounter,daycounter,record;if(authData){console.log("User "+authData.uid+" is logged in with "+authData.provider);var key=window.location.href;key=key.substring(key.indexOf("?")+1),ref.on("value",function(snap){var dataRef=ref.child("Custom").child(authData.uid);dataRef.on("value",function(snapshot){var data=snapshot.val().Habits[key];$("#title")[0].value=data.title,dailycounter=data.dailycounter,daycounter=data.daycounter,record=data.record;var weekdays=document.getElementsByClassName("days");_.each(weekdays,function(d){-1!=_.indexOf(data.weekly_frequency,Number(d.value))?d.checked=!0:d.checked=!1}),_.each($("#dailyOptions")[0],function(d){Number(d.value)==data.daily_frequency&&(d.selected=!0)}),_.each($("#alertOptions")[0],function(d){Number(d.value)==data.time_interval&&(d.selected=!0)});var timepicker=document.getElementsByClassName("timepicker");if(timepicker[0].value=data.from,timepicker[1].value=data.to,!submitted){var icon_holder=document.getElementById("iconHolder"),icon=document.createElement("img");icon.src=data.icon_src,icon.alt="habit icon",icon.className="icon",icon.id=data.icon_id,icon.addEventListener("click",function(){selectImage(data.icon_id)}),icon.style.border="5px solid #42A5F5",icon_holder.appendChild(icon),selected_icon.id=data.icon_id,selected_icon.src=$("#"+data.icon_id).attr("src")}},function(errorObject){})},function(errorObject){}),$("#save").click(function(){submitted=!0;for(var weeklyFreqArray=[],weekdays=document.getElementsByClassName("days"),i=0;i<weekdays.length;i++)weekdays[i].checked&&weeklyFreqArray.push(Number(weekdays[i].value));for(var title=$("#title").val(),newHabit=ref.child("Custom").child(authData.uid).child("Habits"),dailyoption=document.getElementById("dailyOptions"),options=dailyoption.children,i=0;i<options.length;i++)if(options[i].selected)var daily=Number(options[i].value);for(var reminders=document.getElementById("alertOptions"),reminderOptions=reminders.children,i=0;i<reminderOptions.length;i++)if(reminderOptions[i].selected)var interval=Number(reminderOptions[i].value);var hours=document.getElementsByClassName("timepicker"),start=hours[0].value,end=hours[1].value;newHabit.child(key).set({title:title,icon_id:selected_icon.id,icon_src:selected_icon.src,daily_frequency:daily,weekly_frequency:weeklyFreqArray,time_interval:interval,from:start,to:end,dailycounter:dailycounter,record:record,daycounter:daycounter}),mixpanel.track("User edited a habit")})}else Rollbar.info("User is logged out"),window.location.href="../src/login.html"}function toggleReminder(){$(".hide").toggleClass("reminderDivShow"),$(".fa-chevron-right").toggleClass("fa-chevron-down")}function getIcon(e){Rollbar.debug(e);var icon_holder=document.getElementById("iconHolder"),filename=e.timeStamp,icon=document.createElement("img");icon.src=e.fpfile.url,icon.alt=filename,icon.className="icon",icon.id=filename,icon.dataSelected=!1,icon.addEventListener("click",function(){selectImage(filename)}),icon_holder.appendChild(icon),selectImage(filename)}function selectImage(name){$("#iconHolder img").attr("style","border:none"),$("#"+name).attr("style","border:5px solid #42A5F5"),selected_icon.id=name,selected_icon.src=$("#"+name).attr("src")}function authDataCallback(authData){var dailycounter,daycounter,record;if(authData){console.log("User "+authData.uid+" is logged in with "+authData.provider);var key=window.location.href;key=key.substring(key.indexOf("?")+1),ref.on("value",function(snap){var dataRef=ref.child("Custom").child(authData.uid);dataRef.on("value",function(snapshot){var data=snapshot.val().Habits[key];$("#title")[0].value=data.title,dailycounter=data.dailycounter,daycounter=data.daycounter,record=data.record;var weekdays=document.getElementsByClassName("days");_.each(weekdays,function(d){-1!=_.indexOf(data.weekly_frequency,Number(d.value))?d.checked=!0:d.checked=!1}),_.each($("#dailyOptions")[0],function(d){Number(d.value)==data.daily_frequency&&(d.selected=!0)}),_.each($("#alertOptions")[0],function(d){Number(d.value)==data.time_interval&&(d.selected=!0)});var timepicker=document.getElementsByClassName("timepicker");if(timepicker[0].value=data.from,timepicker[1].value=data.to,!submitted){var icon_holder=document.getElementById("iconHolder"),icon=document.createElement("img");icon.src=data.icon_src,icon.alt="habit icon",icon.className="icon",icon.id=data.icon_id,icon.addEventListener("click",function(){selectImage(data.icon_id)}),icon.style.border="5px solid #42A5F5",icon_holder.appendChild(icon),selected_icon.id=data.icon_id,selected_icon.src=$("#"+data.icon_id).attr("src")}},function(errorObject){})},function(errorObject){}),$("#save").click(function(){submitted=!0;for(var weeklyFreqArray=[],weekdays=document.getElementsByClassName("days"),i=0;i<weekdays.length;i++)weekdays[i].checked&&weeklyFreqArray.push(Number(weekdays[i].value));for(var title=$("#title").val(),newHabit=ref.child("Custom").child(authData.uid).child("Habits"),dailyoption=document.getElementById("dailyOptions"),options=dailyoption.children,i=0;i<options.length;i++)if(options[i].selected)var daily=Number(options[i].value);for(var reminders=document.getElementById("alertOptions"),reminderOptions=reminders.children,i=0;i<reminderOptions.length;i++)if(reminderOptions[i].selected)var interval=Number(reminderOptions[i].value);var hours=document.getElementsByClassName("timepicker"),start=hours[0].value,end=hours[1].value;newHabit.child(key).set({title:title,icon_id:selected_icon.id,icon_src:selected_icon.src,daily_frequency:daily,weekly_frequency:weeklyFreqArray,time_interval:interval,from:start,to:end,dailycounter:dailycounter,record:record,daycounter:daycounter}),mixpanel.track("User edited a habit")})}else Rollbar.info("User is logged out"),window.location.href="../src/login.html"}function toggleReminder(){$(".hide").toggleClass("reminderDivShow"),$(".fa-chevron-right").toggleClass("fa-chevron-down")}function getIcon(e){Rollbar.debug(e);var icon_holder=document.getElementById("iconHolder"),filename=e.timeStamp,icon=document.createElement("img");icon.src=e.fpfile.url,icon.alt=filename,icon.className="icon",icon.id=filename,icon.dataSelected=!1,icon.addEventListener("click",function(){selectImage(filename)}),icon_holder.appendChild(icon),selectImage(filename)}function selectImage(name){$("#iconHolder img").attr("style","border:none"),$("#"+name).attr("style","border:5px solid #42A5F5"),selected_icon.id=name,selected_icon.src=$("#"+name).attr("src")}function authDataCallback(authData){var dailycounter,daycounter,record;if(authData){console.log("User "+authData.uid+" is logged in with "+authData.provider);var key=window.location.href;key=key.substring(key.indexOf("?")+1),ref.on("value",function(snap){var dataRef=ref.child("Custom").child(authData.uid);dataRef.on("value",function(snapshot){var data=snapshot.val().Habits[key];$("#title")[0].value=data.title,dailycounter=data.dailycounter,daycounter=data.daycounter,record=data.record;var weekdays=document.getElementsByClassName("days");_.each(weekdays,function(d){-1!=_.indexOf(data.weekly_frequency,Number(d.value))?d.checked=!0:d.checked=!1}),_.each($("#dailyOptions")[0],function(d){Number(d.value)==data.daily_frequency&&(d.selected=!0)}),_.each($("#alertOptions")[0],function(d){Number(d.value)==data.time_interval&&(d.selected=!0)});var timepicker=document.getElementsByClassName("timepicker");if(timepicker[0].value=data.from,timepicker[1].value=data.to,!submitted){var icon_holder=document.getElementById("iconHolder"),icon=document.createElement("img");icon.src=data.icon_src,icon.alt="habit icon",icon.className="icon",icon.id=data.icon_id,icon.addEventListener("click",function(){selectImage(data.icon_id)}),icon.style.border="5px solid #42A5F5",icon_holder.appendChild(icon),selected_icon.id=data.icon_id,selected_icon.src=$("#"+data.icon_id).attr("src")}},function(errorObject){})},function(errorObject){}),$("#save").click(function(){submitted=!0;for(var weeklyFreqArray=[],weekdays=document.getElementsByClassName("days"),i=0;i<weekdays.length;i++)weekdays[i].checked&&weeklyFreqArray.push(Number(weekdays[i].value));for(var title=$("#title").val(),newHabit=ref.child("Custom").child(authData.uid).child("Habits"),dailyoption=document.getElementById("dailyOptions"),options=dailyoption.children,i=0;i<options.length;i++)if(options[i].selected)var daily=Number(options[i].value);for(var reminders=document.getElementById("alertOptions"),reminderOptions=reminders.children,i=0;i<reminderOptions.length;i++)if(reminderOptions[i].selected)var interval=Number(reminderOptions[i].value);var hours=document.getElementsByClassName("timepicker"),start=hours[0].value,end=hours[1].value;newHabit.child(key).set({title:title,icon_id:selected_icon.id,icon_src:selected_icon.src,daily_frequency:daily,weekly_frequency:weeklyFreqArray,time_interval:interval,from:start,to:end,dailycounter:dailycounter,record:record,daycounter:daycounter}),mixpanel.track("User edited a habit")})}else Rollbar.info("User is logged out"),window.location.href="../src/login.html"}function toggleReminder(){$(".hide").toggleClass("reminderDivShow"),$(".fa-chevron-right").toggleClass("fa-chevron-down")}function getIcon(e){Rollbar.debug(e);var icon_holder=document.getElementById("iconHolder"),filename=e.timeStamp,icon=document.createElement("img");icon.src=e.fpfile.url,icon.alt=filename,icon.className="icon",icon.id=filename,icon.dataSelected=!1,icon.addEventListener("click",function(){selectImage(filename)}),icon_holder.appendChild(icon),selectImage(filename)}function selectImage(name){$("#iconHolder img").attr("style","border:none"),$("#"+name).attr("style","border:5px solid #42A5F5"),selected_icon.id=name,selected_icon.src=$("#"+name).attr("src")}function authDataCallback(authData){var dailycounter,daycounter,record;if(authData){console.log("User "+authData.uid+" is logged in with "+authData.provider);var key=window.location.href;key=key.substring(key.indexOf("?")+1),ref.on("value",function(snap){var dataRef=ref.child("Custom").child(authData.uid);dataRef.on("value",function(snapshot){var data=snapshot.val().Habits[key];$("#title")[0].value=data.title,dailycounter=data.dailycounter,daycounter=data.daycounter,record=data.record;var weekdays=document.getElementsByClassName("days");_.each(weekdays,function(d){-1!=_.indexOf(data.weekly_frequency,Number(d.value))?d.checked=!0:d.checked=!1}),_.each($("#dailyOptions")[0],function(d){Number(d.value)==data.daily_frequency&&(d.selected=!0)}),_.each($("#alertOptions")[0],function(d){Number(d.value)==data.time_interval&&(d.selected=!0)});var timepicker=document.getElementsByClassName("timepicker");if(timepicker[0].value=data.from,timepicker[1].value=data.to,!submitted){var icon_holder=document.getElementById("iconHolder"),icon=document.createElement("img");icon.src=data.icon_src,icon.alt="habit icon",icon.className="icon",icon.id=data.icon_id,icon.addEventListener("click",function(){selectImage(data.icon_id)}),icon.style.border="5px solid #42A5F5",icon_holder.appendChild(icon),selected_icon.id=data.icon_id,selected_icon.src=$("#"+data.icon_id).attr("src")}},function(errorObject){})},function(errorObject){}),$("#save").click(function(){submitted=!0;for(var weeklyFreqArray=[],weekdays=document.getElementsByClassName("days"),i=0;i<weekdays.length;i++)weekdays[i].checked&&weeklyFreqArray.push(Number(weekdays[i].value));for(var title=$("#title").val(),newHabit=ref.child("Custom").child(authData.uid).child("Habits"),dailyoption=document.getElementById("dailyOptions"),options=dailyoption.children,i=0;i<options.length;i++)if(options[i].selected)var daily=Number(options[i].value);for(var reminders=document.getElementById("alertOptions"),reminderOptions=reminders.children,i=0;i<reminderOptions.length;i++)if(reminderOptions[i].selected)var interval=Number(reminderOptions[i].value);var hours=document.getElementsByClassName("timepicker"),start=hours[0].value,end=hours[1].value;newHabit.child(key).set({title:title,icon_id:selected_icon.id,icon_src:selected_icon.src,daily_frequency:daily,weekly_frequency:weeklyFreqArray,time_interval:interval,from:start,to:end,dailycounter:dailycounter,record:record,daycounter:daycounter}),mixpanel.track("User edited a habit")})}else Rollbar.info("User is logged out"),window.location.href="../src/login.html"}var submitted=!1,selected_icon={id:"default",src:"../img/No_image_available.jpg"},ref=new Firebase("https://burning-heat-9490.firebaseio.com/");ref.onAuth(authDataCallback);var submitted=!1,selected_icon={id:"default",src:"../img/No_image_available.jpg"},ref=new Firebase("https://burning-heat-9490.firebaseio.com/");ref.onAuth(authDataCallback);var submitted=!1,selected_icon={id:"default",src:"../img/No_image_available.jpg"},ref=new Firebase("https://burning-heat-9490.firebaseio.com/");ref.onAuth(authDataCallback);var submitted=!1,selected_icon={id:"default",src:"../img/No_image_available.jpg"},ref=new Firebase("https://burning-heat-9490.firebaseio.com/");ref.onAuth(authDataCallback);