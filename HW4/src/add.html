<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Add a habit</title>
		<link rel="stylesheet" href="../css/forms.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>
		<script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
		<script src="../js/jquery-1.11.3.min.js"></script>
		<script src="../js/add.js"></script>
		<script src="../js/notification.js"></script>
	</head>
	<body onload="reminder()">

		<div class="forms">
			<h2>Add A Habit</h2>
			<form>
				<p><label><span id="title_text">Habit Title</span></label></p>
				<p><input id="title" type="text" name="fullname" placeholder="Your Habit"></p> <!-- change this to a form -->
				<p><label>Habit Icon</label></p>
				<img id="icon1" class="icon" onclick="selectImage('icon1');" src="../img/sleep.jpg" alt="sleep image"/>
				<img id="icon2" class="icon" onclick="selectImage('icon2');" src="../img/salad.jpg" alt="eat image"/>
				<img id="icon3" class="icon" onclick="selectImage('icon3');" src="../img/run.jpg" alt="run image"/>
				<img id="icon4" class="icon" src="../img/add.png" alt="find a image"/>
				
				<p><label>Weekly Frequency</label></p>
				<div id="ck-button">
					<label> <input type="checkbox" name="date" value="sunday"><span>Sun</span></label>
					<label> <input type="checkbox" name="date" value="monday"><span>Mon</span></label>
					<label> <input type="checkbox" name="date" value="tuesday"><span>Tues</span></label>
					<label> <input type="checkbox" name="date" value="wednesday"><span>Wed</span></label>
					<label> <input type="checkbox" name="date" value="thursday"><span>Thur</span></label>
					<label> <input type="checkbox" name="date" value="friday"><span>Fri</span></label>
					<label> <input type="checkbox" name="date" value="saturday"><span>Sat</span></label>
				</div>
		
				<p><label>Daily Frequency</label></p>
				<div id="daily-button">
					<label> <input type="checkbox" name="day" value="one"><span>1</span></label>
					<label> <input type="checkbox" name="day" value="two"><span>2</span></label>
					<label> <input type="checkbox" name="day" value="three"><span>3</span></label>
					<span id="times">times</span>
				</div>
				
				<p><label><span id="others_text">Others: </span><input id="others" type="text" name="day" placeholder="More than 3 times"></label></p>

				<button id="reminder" onclick="toggleReminder()" type="button">Reminder <i class="fa fa-chevron-right"></i></button>
				<div class="hide">
					<select name="alert-options" id="alertOptions">
						<option value="0">None</option>
						<option value="1">Every 1 hour</option>
						<option value="2">Every 2 hour</option>
						<option value="3">Every 3 hour</option>
						<option value="4">Every 4 hour</option>
						<option value="5">Every 5 hour</option>
					</select>
					<label><span class="text-format"> between </span><input class="timepicker" type="time" name="time" value="00:00"></label>
					<label><span class="text-format">and </span><input class="timepicker" type="time" name="time" value="23:59"></label>
				</div>

				<p id="save_p"><input id="save" type="button" value="Save It"></p>
			</form>
			
		</div>
	<script>
			//add error checking and validation

			/* Page transitions */
			$(window).load(function() { 
			    $(document.body).animate({opacity: 1}, 750); 
			});

			$('#save').click(function pageTransition(){ 
    			$(document.body).animate({opacity: 0}, 750, function(){window.location.href='list.html'}); 

			}); 

			function selectImage(name) {
				//Clear all the other effects
				document.getElementById('icon1').style.border = "none";
				document.getElementById('icon2').style.border = "none";
				document.getElementById('icon3').style.border = "none";
				var image = document.getElementById(name);
				image.style.border = "5px solid #42A5F5";
			}

			//add new habit to Firebase
			var ref = new Firebase('https://burning-heat-9490.firebaseio.com/');
       	
       		var habitTitle = $('#title');
       		var dailyFreq = $('#others');
       		var weeklyFreqArray = [];

       		//if weeklyFreq is checked, store value into an array of strings
       		$('#ck-button').click(function addWeeklyFreq(){
       			var input = document.getElementById("ck-button");
       			for(var i = 0; i < input.length; i++)
       				//if(inputs[i].getElementByValue = true) //how do you check an element has been clicked??
       					weeklyFreqArray.push(input[i].value);
       			return weeklyFreqArray;

			 	//weeklyFreqArray.push($('#ck-button').value);
			 	 //console.log(weeklyFreq.length);
			});
       		
       		//on save, send data into firebase
       		$('#save').click(function createHabit(){
       			var newHabit = ref.child('Habits');
       			//store habit values
       			var title = habitTitle.val();
       			var daily = dailyFreq.val();
       			var weekly = weeklyFreqArray.toString(); //convert array to string
       			
       				//push habit values into Firebase
       				newHabit.push({title:title, daily_frequency:daily, weekly_frequency:weekly});
       		});

		</script> 
	</body>
</html>
